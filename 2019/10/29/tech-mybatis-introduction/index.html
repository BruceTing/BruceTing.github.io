<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">MyBatisä»‹ç»åŠåŸºæœ¬ç”¨æ³• | DuoDuo</title>
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * é‚®ç®±ä¿¡æ¯ä¹‹ç±»çš„ä¸œè¥¿å¯ä»¥å¡«åœ¨è¿™é‡Œï¼Œè¿™äº›jså˜é‡åŸºæœ¬éƒ½ä½œç”¨äºsakura-app.js
   * è¿™æ ·çš„è®¾ç½®ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨åŸºäºPHPå¼€å‘çš„ä¸»é¢˜ä¸­è®¾ç½®jså˜é‡ï¼Œæ—¢ç„¶ç§»æ¤åˆ°äº†Nodeä¸Šï¼Œæˆ‘æƒ³æˆ–è®¸å¯ä»¥ç²¾ç®€è¿™ä¸€é€»è¾‘å§
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "ãŸãã•ã‚“";
  mashiro_option.author_name = "ãŸãã•ã‚“";
  mashiro_option.site_url = "https://www.yeahme.cn";
  mashiro_option.v_appId = "GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz";
  mashiro_option.v_appKey = "mgOpfzbkHYqU92CV4IDlAUHQ";
  mashiro_option.mathjax = "0";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(1).jpg.webp,https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(2).jpg.webp,https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(3).jpg.webp,https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(4).jpg.webp,https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(5).jpg.webp,https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(6).jpg.webp,https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(7).jpg.webp,https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/cover/(8).jpg.webp".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('æœ‹å‹ï¼ŒIEæµè§ˆå™¨æœªé€‚é…å“¦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dim">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://www.yeahme.cn">
          <img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/base/avatar.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>Future is comming!</p>
<!--
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/BruceTing" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/social/github.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
-->
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>

    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono"></span>
            <span class="shironeko">ãŸãã•ã‚“</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    é¦–é¡µ
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    å½’æ¡£
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/tech/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          æŠ€æœ¯
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/life/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          ç”Ÿæ´»
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/thought/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          éšæƒ³
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/source/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          èµ„æº
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/reprint/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          è½¬è½½
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    å…³äº
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          æˆ‘ï¼Ÿ
                        </a>
                      </li>
                    
                      <li>
                        <a href="/atom.xml">
                          <i class="fa fa-rss faa-pulse" aria-hidden="true"></i>
                          RSS
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- æœ‰é…å›¾é»˜è®¤æ¸²æŸ“ç¬¬ä¸€å¼  -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/article/tech/mybatis/introduction.jpeg);" src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/loader/cup.gif" data-src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/article/tech/mybatis/introduction.jpeg">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      MyBatisä»‹ç»åŠåŸºæœ¬ç”¨æ³•</h1>
      <p class="entry-census">
        <span>
          <a href="">
            <img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/base/avatar.jpg">
          </a>
        </span>
        <span>
          <a href="">å¤šå¤š</a>
        </span>
        <span class="bull">
        Â·</span>
        2019-10-29<span class="bull">
        Â·</span>
      <span id="busuanzi_value_page_pv"></span>æ¬¡é˜…è¯»</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- å¥—åµŒç›®å½•ä½¿ç”¨ï¼ˆä¸»è¦ä¸ºäº†æ”¯æ´è¯„è®ºï¼‰-->
        
        <div class="entry-content">
          <h2 id="ä»€ä¹ˆæ˜¯MyBatis"><a href="#ä»€ä¹ˆæ˜¯MyBatis" class="headerlink" title="ä»€ä¹ˆæ˜¯MyBatis"></a>ä»€ä¹ˆæ˜¯MyBatis</h2><p>MyBatiså®˜ç½‘ç»™å‡ºçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="What">MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings. MyBatis eliminates almost all of the JDBC code and manual setting of parameters and retrieval of results. MyBatis can use simple XML or Annotations for configuration and map primitives, Map interfaces and Java POJOs (Plain Old Java Objects) to database records.</code></pre>
<p>è‹±æ–‡ä¸å¥½ï¼Ÿæ²¡å…³ç³»ï¼ŒMyBatisç»™å‡ºäº†å¤šç§è¯­è¨€ï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº†ä¸­æ–‡ç‰ˆå®˜æ–¹ç¿»è¯‘ï¼Œæ¥çœ‹çœ‹ï¼š</p>
<pre><code class="MyBatisçš„å®šä¹‰">MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</code></pre>
<h2 id="æ€ä¹ˆä½¿ç”¨å‘¢"><a href="#æ€ä¹ˆä½¿ç”¨å‘¢" class="headerlink" title="æ€ä¹ˆä½¿ç”¨å‘¢"></a>æ€ä¹ˆä½¿ç”¨å‘¢</h2><p>æˆ‘ä»¬å°±ä¸æŒ‰ç…§å®˜ç½‘é‚£æ ·ï¼Œåˆå§‹åŒ–ä¸€ä¸ªmavené¡¹ç›®ï¼Œç„¶åå†æ‰‹åŠ¨å¼•å…¥jaråŒ…çš„æ–¹å¼æ¥æ„å»ºé¡¹ç›®äº†ã€‚æˆ‘ä»¬ç›´æ¥ä½¿ç”¨Ideaæ¥åˆå§‹åŒ–ä¸€ä¸ªSpringbooté¡¹ç›®(ç›®å‰å¤§å®¶éƒ½å·²åœ¨ç”¨Springbootå¼€å‘é¡¹ç›®ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨<code>Spring Initializr</code>åˆå§‹åŒ–é¡¹ç›®å°±OKã€‚å®åœ¨ä¸æƒ³ç”¨ï¼Œé‚£å°±æ²¡åŠæ³•å’¯ï¼)ï¼Œç†Ÿæ‚‰ä¸€ä¸‹Springbootæ•´åˆä¸­é—´ä»¶çš„æµç¨‹ã€‚<br>æ‰“å¼€Ideaï¼Œä¾æ¬¡<code>File -&gt; new -&gt; Project...</code> ï¼Œ é€‰æ‹©<code>Spring Initializr</code>ï¼Œé…ç½®å¥½<code>JDK</code>ï¼Œç„¶åNextï¼Œé…ç½®å¥½<code>Project Metadata</code>ï¼Œç„¶ånextï¼Œå¯ä»¥é€‰æ‹©<code>Web -&gt; Spring Web</code>æ–¹ä¾¿åç»­åšæµ‹è¯•ï¼Œé‡è¦çš„æ˜¯é€‰æ‹©<code>SQL -&gt; MyBatis Framework ã€MySQL Driver</code>è¿™ä¸¤é¡¹ï¼Œç„¶ånexté…ç½®é¡¹ç›®åç§°åŠå­˜å‚¨è·¯å¾„ï¼ŒFinishåå‘¢ï¼Œé¡¹ç›®å°±å»ºå¥½äº†ï¼Œé¡ºå¸¦æ‰€éœ€è¦çš„ä¾èµ–åŒ…ä¹Ÿå¼•å…¥åˆ°é¡¹ç›®äº†ã€‚<br>åœ¨å¼€å§‹ä¹‹å‰å‘¢ï¼Œéœ€è¦å‡†å¤‡ä¸€ä¸ªæµ‹è¯•åº“ï¼ˆåº“åæŒ‰ä½ å–œæ¬¢çš„æ–¹å¼å‘½åå°±å¥½ï¼‰ä»¥åŠä¸€ä¸ªæµ‹è¯•è¡¨ï¼ˆä»¥ä¸‹æµ‹è¯•è¡¨ä¸º<code>USER</code>ï¼‰ï¼Œå‡†å¤‡å¥½ä¹‹åå‘¢ï¼Œå°±å¯ä»¥å¼€å§‹ä»¥ä¸‹éªšæ“ä½œäº†ã€‚</p>
<h3 id="ç¼–ç¨‹å¼"><a href="#ç¼–ç¨‹å¼" class="headerlink" title="ç¼–ç¨‹å¼"></a>ç¼–ç¨‹å¼</h3><h4 id="1ã€æ·»åŠ é…ç½®"><a href="#1ã€æ·»åŠ é…ç½®" class="headerlink" title="1ã€æ·»åŠ é…ç½®"></a>1ã€æ·»åŠ é…ç½®</h4><p>åœ¨<code>resources</code>åŒ…ä¸‹æ–°å»º<code>mybatis-config.xml</code>ï¼Œç„¶ååŠ å…¥ä¸‹é¢æ¨¡æ¿å†…å®¹ï¼š</p>
<pre><code class="mybatis-config">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
  PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
  &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
  // ç¯å¢ƒçš„åç§°ï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒ
  &lt;environments default=&quot;development&quot;&gt;
    // ç¯å¢ƒIDæˆ–æ•°æ®æºIDï¼Œé€šè¿‡IDå¯ä»¥é…ç½®å¤šä¸ªæ•°æ®æº
    &lt;environment id=&quot;development&quot;&gt;
      // å¯ç”¨äº‹ç‰©
      &lt;transactionManager type=&quot;JDBC&quot;/&gt;
      // æ„å»ºè¿æ¥æ± 
      &lt;dataSource type=&quot;POOLED&quot;&gt;
        // MySQLé©±åŠ¨
        &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;
        // MySQLæ•°æ®åº“é“¾æ¥åœ°å€
        &lt;property name=&quot;url&quot; value=&quot;xxx&quot;/&gt;
        // ç”¨æˆ·å
        &lt;property name=&quot;username&quot; value=&quot;test&quot;/&gt;
        // å¯†ç 
        &lt;property name=&quot;password&quot; value=&quot;test&quot;/&gt;
      &lt;/dataSource&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;
  &lt;mappers&gt;
    // SQLæŸ¥è¯¢è¯­å¥é…ç½®
    // SQLçš„é…ç½®æ–¹å¼æœ‰ä¸¤ç§ï¼š
    // ç¬¬ä¸€ç§ï¼šé‡‡ç”¨è¿™ç§XMLçš„é…ç½®æ–¹å¼
    // ç¬¬äºŒç§ï¼šä½¿ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œç›´æ¥åœ¨æ¥å£æ–¹æ³•ä¸Šä½¿ç”¨@Selectç­‰æ³¨è§£ï¼Œä¾‹å¦‚ï¼š
    // public interface UserMapper {
    //    @Select(&quot;SELECT * FROM USER WHERE id = #{id}&quot;)
    //    User selectUser(Long id);
    // }
    // ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œä½¿ç”¨å“ªä¸€ç§å®Œå…¨å–å†³äºè‡ªå·±æˆ–æ˜¯å¼€å‘å›¢é˜Ÿ
    &lt;mapper resource=&quot;mapper/UserMapper.xml&quot;/&gt;
  &lt;/mappers&gt;
&lt;/configuration&gt;</code></pre>
<p>ä¾æ¬¡å¡«ä¸Šä½ MySQLçš„ç›¸å…³ä¿¡æ¯å³å¯ã€‚<br><code>&lt;configuration&gt;</code>èŠ‚ç‚¹ä¸­è¿˜å¯ä»¥é…ç½®<code>&lt;typeHandlers&gt;</code>ï¼Œ<code>&lt;typeHandlers&gt;</code>ä¼šå¯¹å®ä½“ç±»çš„<code>å±æ€§ç±»å‹</code>å’Œæ•°æ®åº“ä¸­çš„<code>å­—æ®µç±»å‹</code>è¿›è¡Œè½¬æ¢ï¼ŒMyBatisé»˜è®¤æ”¯æŒå·²å¾ˆå¤šçš„ç±»å‹è½¬æ¢ï¼Œæ¯”å¦‚ï¼š<code>String</code>å’Œ<code>charã€varchar</code>äº’è½¬ï¼Œ<code>Date</code>å’Œ<code>TIMESTAMP</code>äº’è½¬ç­‰ã€‚è¿˜å¯ä»¥é…ç½®<code>&lt;plugins&gt;</code>ï¼Œç”¨äºåœ¨å¤„ç†æ•°æ®å‰ååšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚å¸¸ç”¨çš„<code>åˆ†é¡µæ’ä»¶</code>ï¼Œç”¨äºå¯¹åˆ†é¡µè¿›è¡Œå¤„ç†ã€‚è¿˜æœ‰å…¶ä»–çš„ä¸€äº›é…ç½®å¯ä»¥ç›´æ¥åœ¨<a href="https://mybatis.org/mybatis-3/zh/configuration.html" target="_blank" rel="noopener">å®˜ç½‘çš„<code>configuration</code>é…ç½®æ–‡æ¡£</a>ä¸­æŸ¥çœ‹ã€‚<br>MySQLé“¾æ¥çš„é€šå¸¸å†™æ³•ï¼š</p>
<pre><code class="database">jdbc:mysql://ipæˆ–domain:port/åº“å?characterEncoding=utf-8&amp;amp;autoReconnect=true&amp;amp;failOverReadOnly=false&amp;amp;serverTimezone=Asia/Shanghai</code></pre>
<p>åœ¨xmlä¸­é…ç½®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠ<code>&amp;</code>è¿›è¡Œè½¬ä¹‰ä¸º<code>&amp;amp;</code>å¦åˆ™ä¼šæŠ¥é”™ï¼š  </p>
<pre><code class="error">Exception in thread &quot;main&quot; org.apache.ibatis.exceptions.PersistenceException: 
### Error building SqlSession.
### Cause: org.apache.ibatis.builder.BuilderException: Error creating document instance.  Cause: org.xml.sax.SAXParseException; lineNumber: 11; columnNumber: 126; å¯¹å®ä½“ &quot;autoReconnect&quot; çš„å¼•ç”¨å¿…é¡»ä»¥ &#39;;&#39; åˆ†éš”ç¬¦ç»“å°¾ã€‚
    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
    at org.apache.ibatis.session.SqlSessionFactoryBuilder.build(SqlSessionFactoryBuilder.java:80)
    at org.apache.ibatis.session.SqlSessionFactoryBuilder.build(SqlSessionFactoryBuilder.java:64)
    at com.springboot.mybatis.MyBatisTest.main(MyBatisTest.java:22)</code></pre>
<h4 id="2ã€æ„å»ºUserå®ä½“ç±»"><a href="#2ã€æ„å»ºUserå®ä½“ç±»" class="headerlink" title="2ã€æ„å»ºUserå®ä½“ç±»"></a>2ã€æ„å»º<code>User</code>å®ä½“ç±»</h4><p>æ–°å»ºåŒ…<code>com.springboot.springbootmybatis.model</code>ï¼Œç¼–å†™å®ä½“ç±»<code>User</code>ï¼š</p>
<pre><code class="User">public class User {

    /**
     * ä¸»é”®
     */
    private Long id;

    /**
     * ç”¨æˆ·ID
     */
    private Long userId;

    /**
     * ç”¨æˆ·å
     */
    private String name;

    /**
     * ç”¨æˆ·çš„é‚®ç®±
     */
    private String email;

    /**
     * åˆ›å»ºæ—¶é—´
     */
    private Date createdTime;

    /**
     * ä¿®æ”¹æ—¶é—´
     */
    private Date modifiedTime;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Long getUserId() {
        return userId;
    }

    public void setUserId(Long userId) {
        this.userId = userId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public Date getCreatedTime() {
        return createdTime;
    }

    public void setCreatedTime(Date createdTime) {
        this.createdTime = createdTime;
    }

    public Date getModifiedTime() {
        return modifiedTime;
    }

    public void setModifiedTime(Date modifiedTime) {
        this.modifiedTime = modifiedTime;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;id=&quot; + id +
                &quot;, userId=&quot; + userId +
                &quot;, name=&#39;&quot; + name + &#39;\&#39;&#39; +
                &quot;, email=&#39;&quot; + email + &#39;\&#39;&#39; +
                &quot;, createdTime=&quot; + createdTime +
                &quot;, modifiedTime=&quot; + modifiedTime +
                &#39;}&#39;;
    }
}</code></pre>
<h4 id="3ã€æ„å»ºUserDAOæ¥å£"><a href="#3ã€æ„å»ºUserDAOæ¥å£" class="headerlink" title="3ã€æ„å»ºUserDAOæ¥å£"></a>3ã€æ„å»º<code>UserDAO</code>æ¥å£</h4><p>æ–°å»ºåŒ…<code>com.springboot.springbootmybatis.dao</code>ï¼Œæ–°å»ºæ¥å£<code>UserDAO</code>ï¼š</p>
<pre><code class="UserDAO">@Repository
public interface UserDAO {

    /**
     * æ ¹æ®ä¸»é”®æŸ¥è¯¢Userä¿¡æ¯
     * @param id
     * @return
     */
    User selectUser(Long id);

}</code></pre>
<h4 id="4ã€æ„å»ºuserMapper-xmlæ–‡ä»¶"><a href="#4ã€æ„å»ºuserMapper-xmlæ–‡ä»¶" class="headerlink" title="4ã€æ„å»ºuserMapper.xmlæ–‡ä»¶"></a>4ã€æ„å»º<code>userMapper.xml</code>æ–‡ä»¶</h4><p>åœ¨<code>resources</code>ä¸‹æ–°å»º<code>mapper</code>æ–‡ä»¶å¤¹ï¼Œç„¶åæ–°å»º<code>userMapper.xml</code>ï¼š</p>
<pre><code class="userUapper.xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.springboot.dao.UserDAO&quot;&gt;
    &lt;resultMap id=&quot;baseResultMap&quot; type=&quot;com.springboot.model.User&quot;&gt;
        &lt;id column=&quot;ID&quot; jdbcType=&quot;BIGINT&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;USER_ID&quot; jdbcType=&quot;BIGINT&quot; property=&quot;userId&quot;/&gt;
        &lt;result column=&quot;NAME&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;name&quot;/&gt;
        &lt;result column=&quot;EMAIL&quot; jdbcType=&quot;VARCHAR&quot; property=&quot;email&quot;/&gt;
        &lt;result column=&quot;CREATED_TIME&quot; jdbcType=&quot;TIMESTAMP&quot; property=&quot;createdTime&quot;/&gt;
        &lt;result column=&quot;MODIFIED_TIME&quot; jdbcType=&quot;TIMESTAMP&quot; property=&quot;modifiedTime&quot;/&gt;
    &lt;/resultMap&gt;

    &lt;sql id=&quot;columns&quot;&gt;
        ID, USER_ID, NAME, EMAIL, CREATED_TIME, MODIFIED_TIME
    &lt;/sql&gt;

    &lt;select id=&quot;selectUser&quot; resultMap=&quot;baseResultMap&quot;&gt;
        select
            &lt;include refid=&quot;columns&quot;/&gt;
        from USER where id = #{id}
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre>
<p>ä»¥ä¸Šå·¥ä½œå‡†å¤‡å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†ã€‚<br>æ–°å»ºåŒ…<code>com.springboot.springbootmybatis.mybatis</code>ï¼Œç„¶åæ–°å»ºç±»<code>MyBatisTest</code>ï¼Œåœ¨<code>mainæ–¹æ³•</code>ä¸­ï¼Œå¼•å…¥ï¼š</p>
<pre><code class="MyBatisä»£ç ">public class MyBatisTest {

    public static void main(String[] args) throws Exception {
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);

        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);

        try (SqlSession session = sqlSessionFactory.openSession()) {
            UserDAO mapper = session.getMapper(UserDAO.class);
            User user = mapper.selectUser(1L);
            System.out.println(user.toString());
        }

    }

}</code></pre>
<p>æ¥çœ‹çœ‹å…¶ä¸­å‡ ä¸ªé‡è¦ç±»çš„<code>å®˜æ–¹è§£é‡Š</code>ï¼š</p>
<ul>
<li><code>SqlSessionFactoryBuilder</code>ï¼šè¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº†<code>SqlSessionFactory</code>ï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤<code>SqlSessionFactoryBuilder</code>å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨<code>SqlSessionFactoryBuilder</code>æ¥åˆ›å»ºå¤šä¸ª<code>SqlSessionFactory</code>å®ä¾‹ï¼Œä½†æ˜¯æœ€å¥½è¿˜æ˜¯ä¸è¦è®©å…¶ä¸€ç›´å­˜åœ¨ï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚</li>
<li><code>SqlSessionFactory</code>ï¼š<code>SqlSessionFactory</code>ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚ ä½¿ç”¨<code>SqlSessionFactory</code>çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º<code>SqlSessionFactory</code>è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåå‘³é“ï¼ˆbad smellï¼‰â€ã€‚å› æ­¤<code>SqlSessionFactory</code>çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</li>
<li><code>SqlSession</code>ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„<code>SqlSession</code>å®ä¾‹ã€‚<code>SqlSession</code>çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç»å¯¹ä¸èƒ½å°†<code>SqlSession</code>å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚<code>Servlet</code>æ¡†æ¶ä¸­çš„<code>HttpSession</code>ã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ä¸€ç§<code>Web</code>æ¡†æ¶ï¼Œè¦è€ƒè™‘<code>SqlSession</code>æ”¾åœ¨ä¸€ä¸ªå’Œ<code>HTTP</code>è¯·æ±‚å¯¹è±¡ç›¸ä¼¼çš„ä½œç”¨åŸŸä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ°çš„<code>HTTP</code>è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª<code>SqlSession</code>ï¼Œè¿”å›ä¸€ä¸ªå“åº”ï¼Œå°±å…³é—­å®ƒã€‚ è¿™ä¸ªå…³é—­æ“ä½œæ˜¯å¾ˆé‡è¦çš„ï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ°<code>finally</code>å—ä¸­ä»¥ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­ã€‚ åœ¨ä½ çš„æ‰€æœ‰çš„ä»£ç ä¸­ä¸€è‡´åœ°ä½¿ç”¨ä»¥ä¸‹ç¡®ä¿<code>SqlSession</code>å…³é—­çš„æ ‡å‡†æ¨¡å¼æ¥ä¿è¯æ‰€æœ‰æ•°æ®åº“èµ„æºéƒ½èƒ½è¢«æ­£ç¡®åœ°å…³é—­ï¼š</li>
</ul>
<pre><code class="å…³é—­SqlSessionçš„æ ‡å‡†æ¨¡å¼">try (SqlSession session = sqlSessionFactory.openSession()) {
  // ä½ çš„åº”ç”¨é€»è¾‘ä»£ç 
}</code></pre>
<ul>
<li>æ˜ å°„å™¨å®ä¾‹ï¼Œå³<code>xxxDAOæˆ–xxxMapper</code>ï¼šæ˜ å°„å™¨æ˜¯ä¸€äº›ç”±ä½ åˆ›å»ºçš„ã€ç»‘å®šä½ æ˜ å°„çš„è¯­å¥çš„æ¥å£ã€‚æ˜ å°„å™¨æ¥å£çš„å®ä¾‹æ˜¯ä»<code>SqlSession</code>ä¸­è·å¾—çš„ã€‚å› æ­¤ä»æŠ€æœ¯å±‚é¢è®²ï¼Œä»»ä½•æ˜ å°„å™¨å®ä¾‹çš„æœ€å¤§ä½œç”¨åŸŸæ˜¯å’Œè¯·æ±‚å®ƒä»¬çš„<code>SqlSession</code>ç›¸åŒçš„ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæ˜ å°„å™¨å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜ å°„å™¨å®ä¾‹åº”è¯¥åœ¨è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ä¸­è¢«è¯·æ±‚ï¼Œç”¨è¿‡ä¹‹åå³å¯ä¸¢å¼ƒã€‚ å¹¶ä¸éœ€è¦æ˜¾å¼åœ°å…³é—­æ˜ å°„å™¨å®ä¾‹ï¼Œå°½ç®¡åœ¨æ•´ä¸ªè¯·æ±‚ä½œç”¨åŸŸä¿æŒæ˜ å°„å™¨å®ä¾‹ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½ å¾ˆå¿«ä¼šå‘ç°ï¼Œåƒ<code>SqlSession</code>ä¸€æ ·ï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸Šç®¡ç†å¤ªå¤šçš„èµ„æºçš„è¯ä¼šéš¾äºæ§åˆ¶ã€‚ ä¸ºäº†é¿å…è¿™ç§å¤æ‚æ€§ï¼Œæœ€å¥½æŠŠæ˜ å°„å™¨æ”¾åœ¨æ–¹æ³•ä½œç”¨åŸŸå†…ã€‚ä¸‹é¢çš„ç¤ºä¾‹å°±å±•ç¤ºäº†è¿™ä¸ªå®è·µï¼š</li>
</ul>
<pre><code class="æœ€ä½³å®è·µ">try (SqlSession session = sqlSessionFactory.openSession()) {
  BlogMapper mapper = session.getMapper(BlogMapper.class);
  // ä½ çš„åº”ç”¨é€»è¾‘ä»£ç 
}</code></pre>
<p>åé¢æˆ‘ä»¬ä¼šå¯¹è¿™å‡ ä¸ªé‡è¦çš„ç±»è¿›è¡Œæºç åˆ†æï¼Œçœ‹çœ‹åº•å±‚éƒ½å¹²äº†å•¥ï¼Œæ€ä¹ˆå¹²çš„ã€‚</p>
<p>å¥½äº†ï¼Œè¿è¡Œä»£ç åï¼Œå°±å¯ä»¥çœ‹åˆ°æ­£å¸¸çš„æ—¥å¿—è¾“å‡ºå•¦ï¼š</p>
<pre><code class="log">12:27:14.182 [main] DEBUG org.apache.ibatis.logging.LogFactory - Logging initialized using &#39;class org.apache.ibatis.logging.slf4j.Slf4jImpl&#39; adapter.
12:27:14.216 [main] DEBUG org.apache.ibatis.datasource.pooled.PooledDataSource - PooledDataSource forcefully closed/removed all connections.
12:27:14.216 [main] DEBUG org.apache.ibatis.datasource.pooled.PooledDataSource - PooledDataSource forcefully closed/removed all connections.
12:27:14.216 [main] DEBUG org.apache.ibatis.datasource.pooled.PooledDataSource - PooledDataSource forcefully closed/removed all connections.
12:27:14.216 [main] DEBUG org.apache.ibatis.datasource.pooled.PooledDataSource - PooledDataSource forcefully closed/removed all connections.
12:27:14.326 [main] DEBUG org.apache.ibatis.transaction.jdbc.JdbcTransaction - Opening JDBC Connection
12:27:15.277 [main] DEBUG org.apache.ibatis.datasource.pooled.PooledDataSource - Created connection 1709804316.
12:27:15.277 [main] DEBUG org.apache.ibatis.transaction.jdbc.JdbcTransaction - Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@65e98b1c]
12:27:15.287 [main] DEBUG com.springboot.dao.UserDAO.selectUser - ==&gt;  Preparing: select ID, USER_ID, NAME, EMAIL, CREATED_TIME, MODIFIED_TIME from USER where id = ? 
12:27:15.321 [main] DEBUG com.springboot.dao.UserDAO.selectUser - ==&gt; Parameters: 1(Long)
12:27:15.348 [main] DEBUG com.springboot.dao.UserDAO.selectUser - &lt;==      Total: 1
User{id=1, userId=28250, name=&#39;æµ‹è¯•äºº&#39;, email=&#39;test@danke.com&#39;, createdTime=Tue Oct 29 11:49:44 CST 2019, modifiedTime=Tue Oct 29 11:49:44 CST 2019}
12:27:15.349 [main] DEBUG org.apache.ibatis.transaction.jdbc.JdbcTransaction - Resetting autocommit to true on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@65e98b1c]
12:27:15.352 [main] DEBUG org.apache.ibatis.transaction.jdbc.JdbcTransaction - Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@65e98b1c]
12:27:15.352 [main] DEBUG org.apache.ibatis.datasource.pooled.PooledDataSource - Returned connection 1709804316 to pool.</code></pre>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå»æƒ³ï¼šä¸Šé¢çš„<code>USERå®ä½“ç±»ã€UserDAOã€UserMapper.xml</code>è¿™å‡ ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬éƒ½è¦è‡ªå·±å»å†™å—ï¼Œä¸€ä¸ªä¸¤ä¸ªè¿˜å¥½ï¼Œå¤šçš„è¯é‚£å²‚ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Ÿéä¹Ÿã€‚å®˜æ–¹çš„å¤§ä½¬å·²ç»ä¸ºæˆ‘ä»¬è€ƒè™‘å¥½äº†ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨<a href="http://mybatis.org/generator/index.html" target="_blank" rel="noopener">MyBatis Generator(MBG)</a>æ¥ç”Ÿæˆå˜›ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨åˆ†æäº†æˆ‘ä»¬çš„ä¸šåŠ¡åï¼ŒæŠŠæ•°æ®åº“è¡¨å»ºå¥½ï¼Œå°±ç›´æ¥å¯ä»¥ä½¿ç”¨<code>MBG</code>ç”Ÿæˆä»£ç å•¦ï¼Œè¿™ä¸å°±å¾ˆçˆ½äº†å—ï¼  </p>
<h3 id="é›†æˆå¼"><a href="#é›†æˆå¼" class="headerlink" title="é›†æˆå¼"></a>é›†æˆå¼</h3><p>æˆ‘ä»¬ä¿ç•™<code>daoã€modelã€mapper</code>ï¼Œè‡ªåŠ¨é…ç½®çš„æ—¶å€™ï¼Œè¿˜éœ€è¦ä½¿ç”¨ï¼Œå¯åˆ«åˆ äº†ï¼Œè¦ä¸è¿˜å¾—å†æ¥ä¸€éã€‚æŠŠ<code>mybatis-config.xml</code>æ³¨é‡Šæ‰æˆ–æ”¹ä¸º<code>mybatis-config.xml.bak</code>ï¼Œ<code>MyBatisTest</code>å¯ä»¥æš‚æ—¶ä¸ç”¨ç®¡ã€‚  </p>
<h4 id="1ã€æ•°æ®æºåŠMapperé…ç½®"><a href="#1ã€æ•°æ®æºåŠMapperé…ç½®" class="headerlink" title="1ã€æ•°æ®æºåŠMapperé…ç½®"></a>1ã€æ•°æ®æºåŠMapperé…ç½®</h4><p>å°†<code>resources/application.properties</code>æ–‡ä»¶æ”¹ä¸º<code>resources/application.yml</code>ï¼Œå½“ç„¶ï¼Œä¸æ”¹ä¹Ÿå¯ä»¥ï¼Œä¸ªäººå–œæ¬¢<code>yml</code>æ–¹å¼é…ç½®è€Œå·²ã€‚ğŸ˜<br>ç„¶ååœ¨<code>application.yml</code>æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="application.yml">spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: test
    password: test
    url: xxx

mybatis:
  mapper-locations: classpath:/mapper/*.xml
</code></pre>
<p>æ³¨æ„ï¼šåœ¨å†™ymlæ–‡ä»¶çš„æ—¶å€™ï¼Œæ•°æ®åº“é“¾æ¥urlä¸­çš„<code>&amp;</code>ä¸éœ€è¦è½¬ä¹‰æˆ<code>&amp;amp;</code></p>
<h4 id="2ã€æ„å»ºController"><a href="#2ã€æ„å»ºController" class="headerlink" title="2ã€æ„å»ºController"></a>2ã€æ„å»º<code>Controller</code></h4><p>æ–°å»ºåŒ…<code>com.springboot.springbootmybatis.controller</code>ï¼Œæ–°å»ºç±»<code>HelloUserController</code>ï¼š</p>
<pre><code class="controller">@RestController
public class HelloUserController {

    @Autowired
    private UserDAO userDAO; //å¦‚æœåœ¨UserDAOä¸Šæ²¡æœ‰@Repositoryï¼Œæ­¤å¤„ä¼šæŠ¥çº¢è‰²çš„ä¸‹åˆ’çº¿

    @GetMapping(&quot;/user/{userId}&quot;)
    public User getUser(@PathVariable(&quot;userId&quot;) Long userId) {
        User user = userDAO.selectUser(userId);
        return user;
    }

}</code></pre>
<p>è¿™é‡Œçœç•¥äº†<code>service</code>å±‚ï¼Œç›´æ¥åœ¨<code>HelloUserController</code>ä¸­è°ƒç”¨DAOçš„æ¥å£ã€‚å®é™…å¼€å‘ä¸­ï¼Œ<code>Service</code>å±‚æ˜¯å¿…ä¸å¯å°‘çš„ã€‚è¿™é‡Œçš„<code>@GetMapping ç­‰äº @RequestMapping(method = RequestMethod.GET)</code>ï¼Œç®€å•çš„å†™æ³•ï¼Œä¸ä¹‹å¯¹åº”çš„è¿˜æœ‰<code>@PostMapping</code>ã€‚</p>
<h4 id="3ã€æ·»åŠ Mapperæ‰«æ"><a href="#3ã€æ·»åŠ Mapperæ‰«æ" class="headerlink" title="3ã€æ·»åŠ Mapperæ‰«æ"></a>3ã€æ·»åŠ <code>Mapper</code>æ‰«æ</h4><p>åœ¨ä¸»ç±»<code>SpringbootMybatisApplication</code>ä¸Šæ·»åŠ æ³¨è§£ï¼š<code>@MapperScan(basePackages = &quot;com.springboot.springbootmybatis.dao&quot;)</code>ï¼Œé…ç½®æ‰«æDAOæ¥å£çš„åŒ…è·¯å¾„ã€‚</p>
<pre><code class="SpringbootMybatisApplication">@SpringBootApplication
@MapperScan(basePackages = &quot;com.springboot.springbootmybatis.dao&quot;)
public class SpringbootMybatisApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootMybatisApplication.class, args);
    }

}</code></pre>
<p>æ³¨æ„ï¼šæ·»åŠ çš„åŒ…éœ€è¦å’Œä¸»ç±»<code>SpringbootMybatisApplication</code>åœ¨åŒä¸€çº§ç›®å½•ï¼Œå¦åˆ™æ‰«æä¸åˆ°å…¶ä¸­çš„ç±»ï¼Œä¹‹å‰Springbootçš„è‡ªåŠ¨é…ç½®æºç å·²åˆ†æè¿‡ï¼š<code>ä¼šä»¥ä¸»ç±»SpringbootMybatisApplicationæ‰€åœ¨çš„åŒ…ä¸ºbasePackageè¿›è¡Œç»„ä»¶æ‰«æ</code>ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£è¿™é‡Œä¸é…ç½®<code>@MapperScan</code>è¡Œä¸è¡Œå‘¢ï¼Œå½“ç„¶ä¸è¡Œï¼æƒ³æƒ³å•Šï¼Œæˆ‘ä»¬é¢å‘æ¥å£ç¼–ç¨‹ï¼Œéœ€è¦ä½¿ç”¨DAOæ¥å£å»æ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼Œç„¶åè¿”å›ç»™è°ƒç”¨è€…ï¼Œå¦‚æœæ¥å£æ²¡æœ‰å®ç°ç±»ï¼Œé‚£æ€ä¹ˆå»æ•°æ®åº“æŸ¥è¯¢å‘¢ã€‚è€Œä¸”å¦‚æœæ²¡æœ‰å®ç°ç±»ï¼ŒSpringæ€ä¹ˆå»å®ä¾‹åŒ–ï¼Œæ€ä¹ˆå»å¸®åŠ©æˆ‘ä»¬ç®¡ç†Beanå‘¢ï¼Œé‚£ä¸ç”¨Springè¡Œä¸è¡Œï¼Ÿè¡Œå•Šï¼Œé‚£å°±ä½¿ç”¨ä¸Šé¢çš„é‚£ç§æ–¹å¼ï¼Œä¹Ÿå¯ä»¥å®ç°ï¼Œä½†æ˜¯ä¸è§‰å¾—éº»çƒ¦å—ï¼Œæ‰€æœ‰çš„äº‹æƒ…éƒ½è¦è‡ªå·±å»åšäº†ï¼Œæ¯”å¦‚ï¼šBeançš„åˆ›å»ºåŠç®¡ç†ï¼Œè¿æ¥çš„æ‰“å¼€å…³é—­ç­‰ã€‚é‚£è¿™é‡ŒåŠ äº†<code>@MapperScan</code>åï¼Œä¸ºä»€ä¹ˆå°±å¯ä»¥äº†å‘¢ï¼Ÿé¢„çŸ¥åäº‹å¦‚ä½•ï¼Œè¯·å¬ä¸‹å›åˆ†è§£ï¼</p>
<h4 id="4ã€è®¿é—®æµ‹è¯•"><a href="#4ã€è®¿é—®æµ‹è¯•" class="headerlink" title="4ã€è®¿é—®æµ‹è¯•"></a>4ã€è®¿é—®æµ‹è¯•</h4><p>å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œåœ¨<code>SpringbootMybatisApplication</code>ç±»ä¸­å³é”®<code>Run `SpringbootMybatisApplication `</code>ï¼Œå°±å¯ä»¥å¯åŠ¨å•¦ï¼åœ¨æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p>
<pre><code class="log">o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;</code></pre>
<p>åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š<a href="http://localhost:8080/user/1" target="_blank" rel="noopener">http://localhost:8080/user/1</a>ï¼Œå³å¯çœ‹åˆ°ç»“æœï¼š</p>
<pre><code class="show">{&quot;id&quot;:1,&quot;userId&quot;:11111,&quot;name&quot;:&quot;æµ‹è¯•äºº&quot;,&quot;email&quot;:&quot;test@163.com&quot;,&quot;createdTime&quot;:&quot;2019-10-29 15:49:44&quot;,&quot;modifiedTime&quot;:&quot;2019-10-29 15:49:44&quot;}</code></pre>
<h2 id="å°æ€»ç»“"><a href="#å°æ€»ç»“" class="headerlink" title="å°æ€»ç»“"></a>å°æ€»ç»“</h2><h4 id="1ã€ç†è§£ä»€ä¹ˆæ˜¯MyBatis"><a href="#1ã€ç†è§£ä»€ä¹ˆæ˜¯MyBatis" class="headerlink" title="1ã€ç†è§£ä»€ä¹ˆæ˜¯MyBatis"></a>1ã€ç†è§£ä»€ä¹ˆæ˜¯MyBatis</h4><pre><code class="MyBatisçš„å®šä¹‰">MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</code></pre>
<h4 id="2ã€ä½¿ç”¨MyBatisçš„ä¸¤ç§æ–¹å¼"><a href="#2ã€ä½¿ç”¨MyBatisçš„ä¸¤ç§æ–¹å¼" class="headerlink" title="2ã€ä½¿ç”¨MyBatisçš„ä¸¤ç§æ–¹å¼"></a>2ã€ä½¿ç”¨MyBatisçš„ä¸¤ç§æ–¹å¼</h4><ul>
<li>ç¼–ç¨‹å¼</li>
<li>é›†æˆå¼</li>
</ul>
<h4 id="3ã€SQLé…ç½®çš„ä¸¤ç§æ–¹å¼"><a href="#3ã€SQLé…ç½®çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="3ã€SQLé…ç½®çš„ä¸¤ç§æ–¹å¼"></a>3ã€SQLé…ç½®çš„ä¸¤ç§æ–¹å¼</h4><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">ä¼˜ç‚¹</th>
<th align="center">ç¼ºç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td align="center">XMLæ–¹å¼</td>
<td align="center">å¤„ç†å¤æ‚çš„SQLï¼›å¯¹SQLè¿›è¡Œç»Ÿä¸€çš„ç®¡ç†</td>
<td align="center">XMLæ–‡ä»¶æ¯”è¾ƒå¤šï¼›éœ€è¦æŸ¥æ‰¾XMLæ–‡ä»¶</td>
</tr>
<tr>
<td align="center">æ³¨è§£æ–¹å¼</td>
<td align="center">ç®€æ´ç›´è§‚ï¼›ä¸éœ€è¦å»æŸ¥æ‰¾XMLæ–‡ä»¶</td>
<td align="center">ä¸èƒ½å¾ˆå¥½çš„å¤„ç†å¤æ‚çš„SQLï¼Œä¼šæ¯”è¾ƒæ··ä¹±</td>
</tr>
</tbody></table>
<h4 id="4ã€é‡è¦ç±»çš„ä½œç”¨åŸŸ-Scope-å’Œç”Ÿå‘½å‘¨æœŸ"><a href="#4ã€é‡è¦ç±»çš„ä½œç”¨åŸŸ-Scope-å’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4ã€é‡è¦ç±»çš„ä½œç”¨åŸŸ(Scope)å’Œç”Ÿå‘½å‘¨æœŸ"></a>4ã€é‡è¦ç±»çš„ä½œç”¨åŸŸ(Scope)å’Œç”Ÿå‘½å‘¨æœŸ</h4><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">ä½œç”¨åŸŸ(Scope)å’Œç”Ÿå‘½å‘¨æœŸ</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SqlSessionFactoryBuilder</td>
<td align="center">æ–¹æ³•ä½œç”¨åŸŸï¼ˆå³ï¼šå±€éƒ¨æ–¹æ³•å˜é‡ï¼‰</td>
</tr>
<tr>
<td align="center">SqlSessionFactory</td>
<td align="center">åº”ç”¨ä½œç”¨åŸŸï¼ˆå•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td align="center">SqlSession</td>
<td align="center">è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸï¼ˆæ”¾åˆ°<code>finally</code>å—æˆ–<code>try</code>ä¸­ï¼Œç¡®ä¿å…³é—­ï¼‰</td>
</tr>
<tr>
<td align="center">æ˜ å°„å™¨å®ä¾‹</td>
<td align="center">æ–¹æ³•ä½œç”¨åŸŸï¼ˆå³ï¼šå±€éƒ¨æ–¹æ³•å˜é‡ï¼‰</td>
</tr>
</tbody></table>
<h4 id="5ã€å¼€å‘ä¸šåŠ¡é¡ºåº"><a href="#5ã€å¼€å‘ä¸šåŠ¡é¡ºåº" class="headerlink" title="5ã€å¼€å‘ä¸šåŠ¡é¡ºåº"></a>5ã€å¼€å‘ä¸šåŠ¡é¡ºåº</h4><p>ç†è§£ä¸šåŠ¡ -&gt; å»ºç«‹åº“è¡¨ -&gt; ä½¿ç”¨<code>MBG</code>ç”Ÿæˆç›¸å…³ä»£ç </p>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">èµ<div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/donate/alipay.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/donate/wechat.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2019/11/03/tech-mybatis-sqlSessionFactory/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/loader/cup.gif" data-src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/article/tech/mybatis/ssfactory.jpeg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/article/tech/mybatis/ssfactory.jpeg">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                MyBatisæºç åˆ†æä¹‹SqlSessionFactory</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2019/10/24/tech-springboot-custstarter/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/loader/cup.gif" data-src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/article/tech/spring/springboot/custstarter.jpeg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/article/tech/spring/springboot/custstarter.jpeg">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                è‡ªå®šä¹‰Springbootçš„Starter</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
<!--
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz",
        appKey: "mgOpfzbkHYqU92CV4IDlAUHQ",
        path: window.location.pathname,
        placeholder: "ä½ æ˜¯æˆ‘ä¸€ç”Ÿåªä¼šé‡è§ä¸€æ¬¡çš„æƒŠå–œ ..."
      })
  }
</script>

-->
      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          <a href="" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/base/avatar.jpg" itemprop="image" alt="å¤šå¤š" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="" itemprop="url" rel="author">å¤šå¤š</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>ä¸€ä¸ªå¥½å¥‡çš„äºº</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="è¯·è¾“å…¥å…³é”®è¯..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            // PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 duoduo<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/other/disqus-preloader.svg">
      </div>
<!-- 
      <p style="color: #666666;">&copy 2019
        <i class="fa fa-heart animated infinite pulse"></i>
        duoduo's litter house
      </p>
 -->
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
<!--
         <span style="color: #b9b9b9;">
           <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block" ></i>
         </span>
-->
         <span style="color: #b9b9b9;">
           <a target="_blank" rel="nofollow" href="https://github.com/bruceting"><i class="fa fa-github" style="/* color: #ffc0cb; */display:inline-block;font-size: x-large;"></i></a>
         </span>

      <p style="color: #666666;">&copy 2019
        <i class="fa fa-heart animated infinite pulse" style="color: #e74c3c;"></i>
        duoduo's litter house
      </p>
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="fa fa-snowflake-o rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>
        </span>
<!--        <span style="color: #b9b9b9;">Powered by Hexo</span>
-->
<!--
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
 -->
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- ä¸è’œå­ ç½‘é¡µè®¡æ•°å™¨ -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>

<!-- live2d -->
<!-- <script src="https://cdn.jsdelivr.net/gh/bruceting/live2d-widget/autoload.js"></script> -->

<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //æœ‰å›¾çš„æƒ…å†µ
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // æ”¾ç½®ç›®å½•çš„å®¹å™¨
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // æ­£æ–‡å†…å®¹æ‰€åœ¨
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // éœ€è¦ç´¢å¼•çš„æ ‡é¢˜çº§åˆ«
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // æ”¾ç½®ç›®å½•çš„å®¹å™¨
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // æ­£æ–‡å†…å®¹æ‰€åœ¨
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // éœ€è¦ç´¢å¼•çš„æ ‡é¢˜çº§åˆ«
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/bruceting/blogcdn/img/base/avatar.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">ãŸãã•ã‚“</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/BruceTing" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=954655431&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            é¦–é¡µ
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            å½’æ¡£
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/tech/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  æŠ€æœ¯
                </a>
              </li>
            
              <li>
                <a href="/categories/life/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  ç”Ÿæ´»
                </a>
              </li>
            
              <li>
                <a href="/categories/thought/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  éšæƒ³
                </a>
              </li>
            
              <li>
                <a href="/categories/source/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  èµ„æº
                </a>
              </li>
            
              <li>
                <a href="/categories/reprint/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  è½¬è½½
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            å…³äº
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  æˆ‘ï¼Ÿ
                </a>
              </li>
            
              <li>
                <a href="/atom.xml">
                  <i class="fa fa-rss faa-pulse" aria-hidden="true"></i>
                  RSS
                </a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<div class="aplayer"

    data-id="2660651585"

    data-server="netease"

    data-type="playlist"

    data-fixed="true"

    data-autoplay="false"

    data-loop="all"

    data-order="random"

    data-preload="auto"

    data-volume="0.7"

    data-mutex="true"

</div>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haru01.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>